# 1️⃣ Node LTS image
FROM node:20

# 2️⃣ Çalışma dizini
WORKDIR /app

# 3️⃣ package.json ve package-lock.json kopyala
COPY package*.json ./

# 4️⃣ Bağımlılıkları yükle
RUN npm install

# 5️⃣ Tüm src dosyalarını kopyala
COPY . .

# 6️⃣ Gerekli global paketler
RUN npm install -g tsc-watch typescript

# 7️⃣ Port
EXPOSE 3000

# 8️⃣ Development: tsc-watch ile hot-reload
#    index.ts çalışacak
CMD ["npx", "tsc-watch", "--onSuccess", "node ./dist/index.js"]